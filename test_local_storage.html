<!DOCTYPE html>
<html>
<head>
    <title>Test Local Storage</title>
</head>
<body>
    <h1>Test Local Storage for Conversation Rounds</h1>
    <button id="testSave">Test Save</button>
    <button id="testLoad">Test Load</button>
    <button id="testClear">Clear Storage</button>
    <div id="results"></div>
    
    <script>
        function testSave() {
            const testRounds = [
                { role: 'user', message: 'Test message 1' },
                { role: 'assistant', message: 'Test response 1' },
                { role: 'user', message: 'Test message 2' }
            ];
            
            localStorage.setItem('saved_conversation_rounds', JSON.stringify(testRounds));
            document.getElementById('results').innerHTML += '<p>Saved test rounds to localStorage</p>';
        }
        
        function testLoad() {
            const savedRounds = localStorage.getItem('saved_conversation_rounds');
            if (savedRounds) {
                try {
                    const rounds = JSON.parse(savedRounds);
                    let resultHTML = '<p>Loaded rounds:</p><ul>';
                    rounds.forEach((round, index) => {
                        resultHTML += `<li>Round ${index + 1}: ${round.role} - ${round.message}</li>`;
                    });
                    resultHTML += '</ul>';
                    document.getElementById('results').innerHTML += resultHTML;
                } catch (error) {
                    document.getElementById('results').innerHTML += '<p>Error parsing rounds: ' + error.message + '</p>';
                }
            } else {
                document.getElementById('results').innerHTML += '<p>No saved rounds found</p>';
            }
        }
        
        function testClear() {
            localStorage.removeItem('saved_conversation_rounds');
            document.getElementById('results').innerHTML += '<p>Cleared conversation rounds from localStorage</p>';
        }
        
        document.getElementById('testSave').addEventListener('click', testSave);
        document.getElementById('testLoad').addEventListener('click', testLoad);
        document.getElementById('testClear').addEventListener('click', testClear);
    </script>
</body>
</html>