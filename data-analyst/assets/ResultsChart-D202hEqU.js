import{r,j as a,P as L,S as w,L as N,B as k,C as E,a as _,b as A,c as M,d as P,e as B,A as O,p as T,f as Y,h as F}from"./charts-MnlzwJJ5.js";E.register(_,A,M,P,B,O,T,Y,F);const x=["#2aa198","#859900","#b58900","#cb4b16","#dc322f","#6c71c4","#d33682","#268bd2"];function h(s){if(s===null||s==="")return null;const t=Number(s);return Number.isFinite(t)?t:null}const i=20;function X({queryResult:s}){const[t,g]=r.useState(s.columns[0]??""),[n,C]=r.useState(s.columns[1]??s.columns[0]??""),[b,j]=r.useState("bar"),c=r.useMemo(()=>s.rows.map(e=>h(e[n])),[s.rows,n]),v=c.some(e=>e!==null),d=r.useMemo(()=>s.rows.map(e=>e[t]??"NULL"),[s.rows,t]),u=r.useMemo(()=>c.map(e=>e??0),[c]),p=r.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{title:{display:!0,text:t}},y:{title:{display:!0,text:n}}}}),[t,n]),f=r.useMemo(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0}}}),[]);function S(){if(!v)return a.jsxs("div",{className:"duckdb-chart-message",children:["Y column “",n,"” contains no numeric values"]});switch(b){case"bar":return a.jsx(k,{data:{labels:d,datasets:[{label:n,data:u,backgroundColor:"rgba(42, 161, 152, 0.6)",borderColor:"#2aa198",borderWidth:1}]},options:p});case"line":return a.jsx(N,{data:{labels:d,datasets:[{label:n,data:u,backgroundColor:"rgba(42, 161, 152, 0.6)",borderColor:"#2aa198",borderWidth:2,pointRadius:2}]},options:p});case"scatter":{const e=s.rows.map(o=>{const m=h(o[t]),l=h(o[n]);return m!==null&&l!==null?{x:m,y:l}:null}).filter(o=>o!==null);return a.jsx(w,{data:{datasets:[{label:`${t} vs ${n}`,data:e,backgroundColor:"rgba(42, 161, 152, 0.6)",borderColor:"#2aa198"}]},options:p})}case"pie":{const e=d.slice(0,i),o=u.slice(0,i);return a.jsxs(a.Fragment,{children:[a.jsx(L,{data:{labels:e,datasets:[{data:o,backgroundColor:e.map((m,l)=>x[l%x.length]),borderColor:"#eee8d5",borderWidth:1}]},options:f}),s.rows.length>i&&a.jsxs("div",{className:"duckdb-chart-message",children:["Showing first ",i," of ",s.rows.length," rows"]})]})}}}return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"duckdb-chart-controls",children:[a.jsxs("label",{children:["X Column",a.jsx("select",{value:t,onChange:e=>g(e.target.value),children:s.columns.map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsxs("label",{children:["Y Column",a.jsx("select",{value:n,onChange:e=>C(e.target.value),children:s.columns.map(e=>a.jsx("option",{value:e,children:e},e))})]}),a.jsxs("label",{children:["Chart Type",a.jsxs("select",{value:b,onChange:e=>j(e.target.value),children:[a.jsx("option",{value:"bar",children:"Bar"}),a.jsx("option",{value:"line",children:"Line"}),a.jsx("option",{value:"scatter",children:"Scatter"}),a.jsx("option",{value:"pie",children:"Pie"})]})]})]}),a.jsx("div",{className:"duckdb-chart-container",children:S()})]})}export{X as default};
